<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>my example</title>
    <script src="name.8af97a.js"></script>
</head>
<body>
    <input type="file" id="videoInput">
<script>
const videoInput = document.getElementById('videoInput');
videoInput.addEventListener('change', async () => {
  const selectedFile = videoInput.files[0];
  
  if (selectedFile) {
    const formData = new FormData();
    formData.append('file', selectedFile);
    try {
        let myInit = {
                method: "POST",
                // headers: {
                //     "Content-Type": "video/x-matroska",
                // },
                // mode: "cors",
                // cache: "default",
                body: formData
            };
      const response = await fetch('http://127.0.0.1:30001/convert', myInit);
      console.log(response,'[response]')
      if (response.ok) {
        const videoBlob = await response.blob();
        downloadFile(videoBlob);
      } else {
        console.error('视频转码失败');
      }
    } catch (error) {
      console.error('发生错误:', error);
    }
  }
});
function downloadFile(blob){
    var url = window.URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.style.display = 'none';
    a.download =`${new Date()}.mp4`
    a.click();
}
</script>

</body>
</html>